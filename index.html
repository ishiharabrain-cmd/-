<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>ã„ã¤ã§ã‚‚ã‚µãƒãƒ¼ãƒˆ - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .welcome-card {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .app-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .step-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
        }

        .step-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .step-content {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
            margin-left: 55px;
        }

        .device-specific {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .device-name {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .screenshot {
            width: 100%;
            max-width: 300px;
            margin: 15px auto;
            display: block;
            border-radius: 10px;
            border: 2px solid #ddd;
        }

        .button {
            display: block;
            width: 100%;
            padding: 20px;
            font-size: 1.5em;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .button:active {
            transform: scale(0.98);
        }

        .primary-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .secondary-button {
            background: white;
            color: #667eea;
            border: 3px solid #667eea;
        }

        .install-button {
            display: none;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .feature-list {
            margin-top: 20px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9ff;
            border-radius: 10px;
        }

        .feature-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .feature-text {
            flex: 1;
            font-size: 1.1em;
            color: #333;
        }

        .platform-detector {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .platform-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .hidden {
            display: none;
        }

        .success-message {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ã‚«ãƒ¼ãƒ‰ -->
        <div class="welcome-card">
            <div class="app-icon">ğŸ </div>
            <h1>ã„ã¤ã§ã‚‚ã‚µãƒãƒ¼ãƒˆ</h1>
            <p class="subtitle">
                èªçŸ¥ç—‡ã®æ–¹ã®æ—¥å¸¸ç”Ÿæ´»ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹<br>
                è¦‹å½“è­˜æ”¯æ´ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
            </p>

            <!-- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ¤œå‡º -->
            <div class="platform-detector" id="platformInfo">
                <div class="platform-icon" id="platformIcon">ğŸ“±</div>
                <div id="platformText">ãŠä½¿ã„ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’ç¢ºèªä¸­...</div>
            </div>

            <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆPWAå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿è¡¨ç¤ºï¼‰ -->
            <button class="button install-button" id="installButton">
                ğŸ“¥ ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
            </button>

            <!-- ä¸»è¦ãƒœã‚¿ãƒ³ -->
            <button class="button primary-button" onclick="startSetup()">
                ğŸš€ ä»Šã™ãå§‹ã‚ã‚‹
            </button>
            
            <button class="button secondary-button" onclick="showInstructions()">
                ğŸ“– ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’è¦‹ã‚‹
            </button>
        </div>

        <!-- æ©Ÿèƒ½ç´¹ä»‹ -->
        <div class="step-card">
            <div class="step-title">âœ¨ ä¸»ãªæ©Ÿèƒ½</div>
            <div class="feature-list">
                <div class="feature-item">
                    <div class="feature-icon">ğŸ•</div>
                    <div class="feature-text">ä»Šã®æ™‚é–“ã¨æ—¥ä»˜ã‚’å¤§ããè¡¨ç¤º</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ“</div>
                    <div class="feature-text">ç¾åœ¨åœ°ã‚’ç¢ºèªã—ã¦å®¶ã«å¸°ã‚‹ãƒŠãƒ“</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ“¹</div>
                    <div class="feature-text">é€€å±ˆã‚’å’Œã‚‰ã’ã‚‹å‹•ç”»è¦–è´</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ“¸</div>
                    <div class="feature-text">å†™çœŸã‚’æ’®ã£ã¦å®¶æ—ã«é€ä¿¡</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ’Š</div>
                    <div class="feature-text">ãŠè–¬ã®æ™‚é–“ã‚’ãŠçŸ¥ã‚‰ã›</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ”</div>
                    <div class="feature-text">ç‰©ã‚’æ¢ã™ã‚µãƒãƒ¼ãƒˆ</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ“</div>
                    <div class="feature-text">å®¶æ—ã«ãƒ¯ãƒ³ã‚¿ãƒƒãƒã§é›»è©±</div>
                </div>
            </div>
        </div>

        <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ï¼ˆéè¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤ºï¼‰ -->
        <div id="instructionsSection" class="hidden">
            <!-- iPhone/iPadå‘ã‘ -->
            <div class="step-card" id="iosInstructions">
                <div class="step-title">
                    <span class="step-number">1</span>
                    iPhone/iPadã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
                </div>
                <div class="step-content">
                    <div class="device-specific">
                        <div class="device-name">ğŸ“± Safariã§é–‹ã„ã¦ã„ã‚‹å ´åˆ</div>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li>ç”»é¢ä¸‹éƒ¨ã®å…±æœ‰ãƒœã‚¿ãƒ³ <strong>â–¡â†‘</strong> ã‚’ã‚¿ãƒƒãƒ—</li>
                            <li>ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—</li>
                            <li>ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å®Œäº†</li>
                        </ol>
                    </div>
                    <p style="margin-top: 15px; color: #999;">
                        â€» Chromeç­‰ã®ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãŠä½¿ã„ã®å ´åˆã¯ã€Safariã§é–‹ãç›´ã—ã¦ãã ã•ã„
                    </p>
                </div>
            </div>

            <!-- Androidå‘ã‘ -->
            <div class="step-card" id="androidInstructions">
                <div class="step-title">
                    <span class="step-number">1</span>
                    Androidã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
                </div>
                <div class="step-content">
                    <div class="device-specific">
                        <div class="device-name">ğŸ¤– Chromeã§é–‹ã„ã¦ã„ã‚‹å ´åˆ</div>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li>ç”»é¢ä¸Šéƒ¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’ã‚¿ãƒƒãƒ—</li>
                            <li>ã¾ãŸã¯ã€å³ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â‹® ã‹ã‚‰ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’é¸æŠ</li>
                            <li>ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å®Œäº†</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- PCå‘ã‘ -->
            <div class="step-card" id="pcInstructions">
                <div class="step-title">
                    <span class="step-number">1</span>
                    ãƒ‘ã‚½ã‚³ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
                </div>
                <div class="step-content">
                    <div class="device-specific">
                        <div class="device-name">ğŸ’» Chrome/Edgeã®å ´åˆ</div>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li>ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼å³å´ã®ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                            <li>ã¾ãŸã¯ã€å³ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’é¸æŠ</li>
                            <li>ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Œäº†</li>
                        </ol>
                    </div>
                    <p style="margin-top: 15px; color: #999;">
                        â€» ã‚¢ãƒ—ãƒªã¨ã—ã¦ç‹¬ç«‹ã—ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä½¿ç”¨ã§ãã¾ã™
                    </p>
                </div>
            </div>

            <!-- åˆæœŸè¨­å®š -->
            <div class="step-card">
                <div class="step-title">
                    <span class="step-number">2</span>
                    åˆæœŸè¨­å®šã‚’è¡Œã†
                </div>
                <div class="step-content">
                    <p>ã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸã‚‰ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š</p>
                    <ul style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                        <li>âœ… ãŠåå‰ã¨è‡ªå®…ä½æ‰€</li>
                        <li>âœ… å®¶æ—ã®é€£çµ¡å…ˆï¼ˆé›»è©±ç•ªå·ãƒ»ãƒ¡ãƒ¼ãƒ«ï¼‰</li>
                        <li>âœ… ã‹ã‹ã‚Šã¤ã‘ã®ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ±</li>
                        <li>âœ… ãŠè–¬ã‚’é£²ã‚€æ™‚é–“</li>
                    </ul>
                </div>
            </div>

            <!-- ä½¿ã„å§‹ã‚ã‚‹ -->
            <div class="step-card">
                <div class="step-title">
                    <span class="step-number">3</span>
                    ã•ã‚ã€ä½¿ã„å§‹ã‚ã¾ã—ã‚‡ã†ï¼
                </div>
                <div class="step-content">
                    <p>ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚Œã°ã€ã„ã¤ã§ã‚‚ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã§ãã¾ã™ã€‚</p>
                    <button class="button primary-button" onclick="startSetup()" style="margin-top: 20px;">
                        ğŸš€ è¨­å®šã‚’å§‹ã‚ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let deferredPrompt;
        
        // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ¤œå‡º
        function detectPlatform() {
            const ua = navigator.userAgent;
            const platform = navigator.platform;
            let platformName = 'ãã®ä»–';
            let platformIcon = 'ğŸ“±';
            
            if (/iPad|iPhone|iPod/.test(ua)) {
                platformName = 'iPhone/iPad';
                platformIcon = 'ğŸ“±';
                document.getElementById('iosInstructions').style.display = 'block';
                document.getElementById('androidInstructions').style.display = 'none';
                document.getElementById('pcInstructions').style.display = 'none';
            } else if (/Android/.test(ua)) {
                platformName = 'Android';
                platformIcon = 'ğŸ¤–';
                document.getElementById('iosInstructions').style.display = 'none';
                document.getElementById('androidInstructions').style.display = 'block';
                document.getElementById('pcInstructions').style.display = 'none';
            } else if (/Win|Mac|Linux/.test(platform)) {
                platformName = 'ãƒ‘ã‚½ã‚³ãƒ³';
                platformIcon = 'ğŸ’»';
                document.getElementById('iosInstructions').style.display = 'none';
                document.getElementById('androidInstructions').style.display = 'none';
                document.getElementById('pcInstructions').style.display = 'block';
            }
            
            document.getElementById('platformIcon').textContent = platformIcon;
            document.getElementById('platformText').innerHTML = `
                <strong>${platformName}</strong>ã§ã”åˆ©ç”¨ä¸­<br>
                <small style="color: #666;">ã“ã®ãƒ‡ãƒã‚¤ã‚¹ã«æœ€é©ãªæ–¹æ³•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™</small>
            `;
        }

        // PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯¾å¿œ
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            const installButton = document.getElementById('installButton');
            installButton.style.display = 'block';
            
            installButton.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        showSuccessMessage();
                    }
                    
                    deferredPrompt = null;
                    installButton.style.display = 'none';
                }
            });
        });

        // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆ
        window.addEventListener('appinstalled', () => {
            showSuccessMessage();
        });

        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showSuccessMessage() {
            const message = document.createElement('div');
            message.className = 'success-message';
            message.innerHTML = 'âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ï¼<br>ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰èµ·å‹•ã§ãã¾ã™';
            document.querySelector('.container').insertBefore(
                message, 
                document.querySelector('.welcome-card')
            );
            
            setTimeout(() => {
                startSetup();
            }, 2000);
        }

        // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’è¡¨ç¤º
        function showInstructions() {
            document.getElementById('instructionsSection').classList.remove('hidden');
            document.getElementById('instructionsSection').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—é–‹å§‹
        function startSetup() {
            // åˆå›èµ·å‹•ãƒ•ãƒ©ã‚°ã‚’è¨­å®š
            localStorage.setItem('firstTime', 'true');
            window.location.href = 'settings.html';
        }

        // åˆæœŸåŒ–
        detectPlatform();
        
        // ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‹ç¢ºèª
        if (window.matchMedia('(display-mode: standalone)').matches || 
            window.navigator.standalone === true) {
            document.getElementById('platformInfo').innerHTML = `
                <div class="platform-icon">âœ…</div>
                <div><strong>ã‚¢ãƒ—ãƒªã¨ã—ã¦èµ·å‹•ä¸­</strong><br>
                <small style="color: #666;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã™</small></div>
            `;
        }
    </script>
</body>
</html>
